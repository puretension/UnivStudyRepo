# 3. Parsing

## 목차

- 3.1 Programming Language S
- 3.2 Abstract Syntax Tree
- 3.3 Lexical Analyzer Implementation
- 3.4 Parser Implementation

## 3.1 프로그래밍 언어 S(Programming Language S)

- 간단한 교육용 언어로 쉽게 이해 및 구현 가능
- 대화형 인터프리터 방식으로 동작
- 프로그래밍 언어의 주요개념을 쉽게 이해 가능(수식, 실행 문장,변수 선언, 함수 정의 등)
- 블록 중첩을 허용(전역 변수, 지역 변수, 유효범위 등 개념 포함)
- 실행전에 타입검사 수행하는 강한 타입 언어
- 주요 기능을 추가하면서 이 언어의 lexical anaylzer(어휘 분석기), Parser, AST(Abstract Syntax Tree), type checker, interpreter를 순차적으로 구현한다

### **Grammar of Language S(EBNF 형식으로 정의)**

```
<program> → {<command>}
<command> → <decl> | <stmt> | <function> 
<decl> → <type> id [=<expr>];
<stmt> → id = <expr>;
| '{' <stmts> '}'
| if (<expr>) then <stmt> [else <stmt>] | while (<expr>) <stmt>
| read id;
| print <expr>;
| let <decls> in <stmts> end;
<stmts> → {<stmt>} <decls> → {<decl>} <type> → int | bool | string
```

1. 프로그램 <program> → {<command>}
    - `<program>`: 프로그램은 여러 개의 `<command>`로 구성
2. 명령 <command> → <decl> | <stmt> | <function>
    - `<command>`:  `<decl>`, `<stmt>`,`<function>` 중 하나
3. 선언 <decl> → <type> id [=<expr>];
    - `<decl>`: 선언은 데이터 `<type>`과 함께 변수명(id)으로 구성
    - 초기화 표현식 `<expr>`를 포함
4. 문장(Statement) → <stmt>
    - `<stmt>`:
        - 변수에 표현식을 할당: `id = <expr>;`
        - 코드 블록: `{<stmts>}`
        - 조건문: `if (<expr>) then <stmt>`에 선택적으로 `else <stmt>`를 추가
        - 반복문: `while (<expr>) <stmt>`
        - 변수 입력: `read id;`
        - 표현식 출력: `print <expr>;`
        - 지역 변수 선언과 함께 코드 블록: `let <decls> in <stmts> end;`
5. **문장들(Statements)**
    - `<stmts>`: 여러 `<stmt>`로 구성된 블록
6. **선언들(Declarations)**
    - `<decls>`: 여러 `<decl>`로 구성된 블록
7. **타입(Type)**
    - `<type>`: `int`, `bool`, 또는 `string` 중 하나
8. **함수(Function) → 8장에서 다룰 것**

### 실행 가능한 문장들

- 대입문, 조건문, 반복문, 입출력문 → if, while, read, print
- let 문 → 지역변수 선언, 일련의 실행문장 선언가능

### 변수 선언

- int, bool, string만 가능

아래는 예제 6문제

```
>> print “hello world!”; hello world!
>> int x = -5;
>> print x;
-5
>> x = x+1;
>> print x*x;
16
>> if (x>0)
then print x; else print -x; 
4
```

let  <decl> in <stmts> end

```
let int x = 0; in 
	x = x + 2; 
	print x;
end;
```

let <decls> in <stmts> end

```
let int x; int y; in 
	read x;
	if (x>0) then y = x;
	else y = -x;
	print y; 
end;
```

let <decls> in <stmts> end, **factorial**

```
let int x=0; int y=1; in 
	read x;
	while (x>0){ 
	  y = y * x;
	  x = x-1; 
}
 print y;
end;
```

square 함수

```
>> fun int square(int x) return x*x;
>> print square(5);
25
```

factorial recursive 함수

```
>> fun int fact(x)
	if (x==0) then return 1; 
	else x*fact(x-1);
>> print fact(5); 
120
```

## 3.2 Abstract Syntax Tree