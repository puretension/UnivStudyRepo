### 스레드
[혼자 공부하는 컴퓨터구조+운영체제(저자 강민철)](https://www.yes24.com/Product/Goods/111378840)과 [유튜브 강의](https://www.youtube.com/watch?v=isj4sZhoxjk&list=PLYH7OjNUOWLUz15j4Q9M6INxK5J3-59GC&index=2)를 보고 정리한 글입니다. 

- 스레드란 `프로세스를 구성하는 실행흐름의 단위`
- 하나의 프로세스는 하나 이상의 스레드를 가질 수 있음

### 실행흐름이 하나인 프로세스(단일 스레드 프로세스)

### 실행흐름이 여러개인 프로세스(멀티 스레드 프로세스)

### 차이점? → 프로세스를 이루는 여러 명령어 동시 실행 가능

![스크린샷 2024-03-05 오후 4 10 08](https://github.com/puretension/UnivStudyRepo/assets/106448279/88f85e0b-2df9-4806-aba3-ae142192ba24)

### 

### 스레드의 구성 요소

- **스레드 ID, 프로그램 카운터를 비롯한 레지스터 값, 스택** 등
- `실행에 필요한 최소한의 정보`

![스크린샷 2024-03-05 오후 4 10 28](https://github.com/puretension/UnivStudyRepo/assets/106448279/32fd031a-9c05-4281-af47-6299f5cf1e07)

## 멀티 프로세스와 멀티 스레드

- 동일한 작업을 수행하는 단일 프로세스 여러개 실행
- 하나의 프로세스를 여러 스레드로 진행

둘은 어떤 차이가 있을까?

![스크린샷 2024-03-05 오후 4 11 42](https://github.com/puretension/UnivStudyRepo/assets/106448279/4d1a0e41-4739-4905-99ae-3e94b1d749d7)

### **프로세스끼리는 기본적으로 자원을 공유하지 않지만**

### **스레드끼리는 동일 프로세스내의** `자원을 공유`**할 수 있음**

- 프로세스를 fork하면 코드/데이터/힙 영역등 모든 자원이 복제되어 저장됨
- 저장된 메모리 주소를 제외하면 모든 것이 동일한 프로세스 두개가 통채로 메모리에 적재됨
- fork를 3번, 4번 하면 메모리에는 같은 프로세스가 통째로 3개, 4개 적재

fork직후 같은 프로세스를 통째로 메모리에 중복 저장하지 않으면서,

동시에 프로세스간에 자원을 공유하는 방법도 존재한다. → `copy on write`

![스크린샷 2024-03-05 오후 4 11 48](https://github.com/puretension/UnivStudyRepo/assets/106448279/811d504b-3bb3-47aa-ad26-2990e84745eb)

- 스레드들은 각기 다른 스레드 ID, (별도의 실행을 위해 꼭 필요한)
- 프로그램 카운터 값을 포함한 레지스터 값, 스택을 가질 뿐
- 프로세스가 가지는 자원을 공유(멀티 스레드의 가장 큰 특징)
    
    ![스크린샷 2024-03-05 오후 4 11 54](https://github.com/puretension/UnivStudyRepo/assets/106448279/8bee9d44-8176-4627-9f4c-ae41a8455789)

### 한 줄 정리하면?

멀티 프로세스(독립적으로 실행되는 여러 프로세스)는 자원 공유 X

멀티 스레드는 자원공유 O → 협력과 통신이 가능함

### 멀티 프로세스와 멀티 스레드

- 프로세스끼리는 자원을 공유하지 않는다 But.
    - 프로세스 간에도 자원을 주고받을 수 있다. 프로세스 간 통신(IPC)
    - 파일을 통한 프로세스 간 통신, 공유 메모리를 통한 프로세스 간 통신
- 스레드는 프로세스의 자원을 공유한다
